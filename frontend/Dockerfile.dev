FROM node

ARG NPM_TOKEN

# Set working directory
WORKDIR /code

# Copy package.json
COPY package.json /code/
COPY package-lock.json /code/

# Load FontAwesome registry
RUN npm config set "@fortawesome:registry" https://npm.fontawesome.com/
RUN npm config set "//npm.fontawesome.com/:_authToken" ${NPM_TOKEN}

# Install the dependencies
RUN npm install

# Set WATCHBACK_POLLING as true
ENV WATCHBACK_POLLING=true

COPY . /code/